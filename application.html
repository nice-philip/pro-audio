<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专辑申请 - Surroundio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/application.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AUAys9sigvI9TtgDkQMRtQxfrXspOUiEp9CUafMtSagb2r_Av6rYByXOrkRkQIg7weOtYlGKfJMxRuK_&currency=JPY&intent=capture"></script>
    <style>
        /* Base styles */
        
        body {
            font-size: 16px;
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
        }
        
        .form-section {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        /* Mobile-first styles */
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            .form-section {
                padding: 15px;
                margin-bottom: 15px;
            }
            h1 {
                font-size: 1.5rem;
                margin-bottom: 1rem;
            }
            h3 {
                font-size: 1.2rem;
                margin-bottom: 0.8rem;
            }
            h4 {
                font-size: 1.1rem;
            }
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.3rem;
            }
            .form-control {
                font-size: 16px;
                /* Prevents iOS zoom on focus */
                padding: 0.5rem;
                height: auto;
            }
            .input-group {
                margin-bottom: 0.8rem;
            }
            .btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
            /* Improve touch targets */
            .form-check-input {
                width: 1.2rem;
                height: 1.2rem;
                margin-top: 0.2rem;
            }
            .form-check-label {
                padding-left: 0.5rem;
                font-size: 0.9rem;
            }
            /* Accordion improvements */
            .accordion-button {
                padding: 0.8rem;
                font-size: 0.9rem;
            }
            .accordion-body {
                padding: 0.8rem;
            }
            /* Platform selection improvements */
            .platform-section .form-check {
                margin-bottom: 0.5rem;
            }
            /* Song entry improvements */
            .song-entry {
                padding: 15px;
                margin-bottom: 15px;
            }
            .song-entry h4 {
                font-size: 1.1rem;
                margin-bottom: 1rem;
            }
            /* Duration input improvements */
            .duration-input-group {
                display: flex;
                gap: 5px;
            }
            .duration-input-group input {
                width: 60px;
            }
            /* File upload improvements */
            .custom-file-label {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
            /* Enhanced file upload styles */
            .file-upload-section {
                position: relative;
                margin-bottom: 1rem;
            }
            .file-upload-section input[type="file"] {
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                opacity: 0;
                cursor: pointer;
                z-index: 2;
            }
            .file-upload-section .upload-button {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 1rem;
                background: #f8f9fa;
                border: 2px dashed #dee2e6;
                border-radius: 8px;
                transition: all 0.3s ease;
            }
            .file-upload-section .upload-button:hover {
                background: #e9ecef;
                border-color: #adb5bd;
            }
            .file-upload-section .upload-button i {
                margin-right: 0.5rem;
                font-size: 1.2rem;
            }
            .file-upload-section .file-info {
                margin-top: 0.5rem;
                font-size: 0.9rem;
                color: #6c757d;
            }
            .file-upload-section .file-preview {
                margin-top: 1rem;
                max-width: 100%;
                height: auto;
                border-radius: 4px;
                display: none;
            }
            .file-upload-section .file-preview img {
                max-width: 100%;
                height: auto;
                border-radius: 4px;
            }
            .file-upload-section .file-preview audio {
                width: 100%;
                margin-top: 0.5rem;
            }
            .file-upload-section .remove-file {
                position: absolute;
                top: 0.5rem;
                right: 0.5rem;
                background: rgba(255, 255, 255, 0.9);
                border: none;
                border-radius: 50%;
                width: 24px;
            }
            .btn-group {
                display: flex;
                width: 100%;
            }
            .btn-group .btn {
                flex: 1;
            }
            /* Improve checkbox and radio button touch areas */
            .form-check {
                padding-left: 1.5rem;
            }
            .form-check-input {
                margin-left: -1.5rem;
            }
            /* Improve select dropdowns */
            .form-select {
                padding-right: 2rem;
            }
            /* Improve file inputs */
            input[type="file"] {
                font-size: 0.9rem;
            }
            /* Improve accordion touch areas */
            .accordion-button::after {
                width: 1.2rem;
                height: 1.2rem;
            }
        }
        /* Prevent zoom on input focus for iOS */
        
        @supports (-webkit-touch-callout: none) {
            input[type="text"],
            input[type="email"],
            input[type="password"],
            input[type="number"],
            input[type="date"],
            select,
            textarea {
                font-size: 16px;
            }
        }
        /* Improve scrolling performance */
        
        * {
            -webkit-overflow-scrolling: touch;
        }
        /* Improve button feedback */
        
        .btn:active {
            transform: scale(0.98);
        }
        /* Improve form validation visibility */
        
        .is-invalid {
            border-color: #dc3545;
        }
        
        .invalid-feedback {
            font-size: 0.8rem;
            margin-top: 0.2rem;
        }
        /* Improve loading states */
        
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
        /* Improve focus states for accessibility */
        
        .form-control:focus,
        .form-select:focus,
        .btn:focus {
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        
        .audio-specs-table {
            width: 100%;
            margin: 20px 0;
        }
        
        .audio-specs-table th,
        .audio-specs-table td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        
        .audio-specs-table th {
            background-color: #f8f9fa;
        }
        
        .youtube-terms {
            height: 200px;
            overflow-y: scroll;
            padding: 15px;
            border: 1px solid #ddd;
            margin-bottom: 15px;
            background: #f8f9fa;
        }
        
        .required-label::after {
            content: "*";
            color: red;
            margin-left: 4px;
        }
        
        .image-upload-guide {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
        
        .classic-fields {
            display: none;
        }
        
        #genre {
            max-height: 38px;
        }
        /* Pastel button styles */
        
        .btn-pastel {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none !important;
            display: inline-block;
            margin: 5px;
            color: #2C3333 !important;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        @media (max-width: 768px) {
            .btn-pastel {
                width: 100%;
                margin: 10px 0;
                padding: 15px 25px;
                font-size: 16px;
                position: relative;
                z-index: 1;
            }
        }
        
        .classical-required::after {
            content: "*";
            color: red;
            margin-left: 4px;
        }
        /* PayPal Button Styles */
        
        #paypal-button-container {
            max-width: 500px;
            margin: 20px auto;
        }
        
        .payment-status {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        
        .payment-status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .payment-status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .add-button {
            background: #C1FFD7;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            margin: 5px 0;
            cursor: pointer;
        }
        
        .add-button:hover {
            background: #B4EBC5;
        }
        
        .input-group {
            margin-bottom: 10px;
        }
        
        .checkbox-group {
            margin: 15px 0;
        }
        
        .language-section {
            margin: 20px 0;
        }
        
        .platform-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        
        .terms-section {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        
        .terms-content {
            max-height: 200px;
            overflow-y: auto;
            padding: 10px;
            margin: 10px 0;
            background: white;
            border: 1px solid #ddd;
        }
        
        .image-upload-info {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        
        .dynamic-input-container {
            margin-top: 10px;
        }
        
        .remove-input {
            color: red;
            cursor: pointer;
            margin-left: 10px;
        }
        /* Add these styles to the existing style section */
        
        #submitButton {
            position: relative;
            z-index: 999;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            min-height: 44px;
            min-width: 44px;
            padding: 12px 30px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        #submitButton:disabled {
            opacity: 0.8;
            cursor: not-allowed;
        }
        
        #submitButton .spinner-border {
            width: 1rem;
            height: 1rem;
            margin-left: 0.5rem;
        }
        /* Success modal styles */
        
        .modal-dialog-centered {
            display: flex;
            align-items: center;
            min-height: calc(100% - 1rem);
        }
        
        @media (max-width: 768px) {
            #submitButton {
                width: 100%;
                padding: 15px 30px;
                font-size: 1.2rem;
            }
            .modal-dialog {
                margin: 1rem;
            }
            .modal-content {
                border-radius: 1rem;
            }
            .modal-body {
                padding: 1.5rem;
            }
            .modal-footer {
                padding: 1rem;
            }
        }

        /* 服务选择样式 */
        .service-option {
            padding: 20px;
            border: 2px solid #000000;
            border-radius: 10px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            background-color: #ffffff;
        }

        .service-option:hover {
            border-color: #000000;
            background-color: #f8f9fa;
        }

        .service-option .form-check-input {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            margin: 0;
            cursor: pointer;
            z-index: 1;
        }

        .service-option .form-check-label {
            width: 100%;
            cursor: pointer;
            position: relative;
            z-index: 0;
        }

        .service-option .form-check-label h4 {
            margin-bottom: 0.5rem;
            color: #2C3333;
        }

        .service-option .form-check-label p {
            margin-bottom: 0;
            font-size: 0.9rem;
        }

        .service-option .form-check-input:checked + .form-check-label {
            color: #0d6efd;
        }

        .service-option .form-check-input:checked + .form-check-label h4 {
            color: #0d6efd;
        }

        .disabled-field {
            background-color: #d6d8db;
            position: relative;
        }

        .disabled-field::before {
            content: "无需输入";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-size: 1.2rem;
            z-index: 1000;
            display: none;
        }

        .disabled-field:hover::before {
            display: block;
        }

        .disabled-field input,
        .disabled-field select,
        .disabled-field textarea {
            background-color: #c4c6c9 !important;
            cursor: not-allowed;
            opacity: 0.8;
        }

        .disabled-field label {
            color: #495057;
        }

        .disabled-field .form-check-input {
            cursor: not-allowed;
        }

        .disabled-field .accordion-button {
            background-color: #c4c6c9;
            color: #495057;
        }

        .disabled-field .accordion-button::after {
            opacity: 0.5;
        }

        /* 服务选择部分样式 */
        .form-section:first-of-type {
            background-color: #ffffff !important;
        }

        /* 专辑信息部分样式 */
        .form-section:nth-of-type(2) {
            background-color: #ffffff !important;
        }

        .form-section:nth-of-type(2) .form-control,
        .form-section:nth-of-type(2) .form-control:disabled {
            background-color: #ffffff !important;
            opacity: 1 !important;
        }

        .form-section:nth-of-type(2) .disabled-field {
            background-color: #ffffff !important;
        }

        .form-section:nth-of-type(2) .disabled-field input {
            background-color: #ffffff !important;
            opacity: 1 !important;
        }

        .service-option:hover {
            border-color: #000000;
            background-color: #f8f9fa;
        }

        .service-option .form-check-input:checked + .form-check-label + .service-option,
        .service-option .form-check-input:checked ~ .service-option {
            border-color: #000000;
            border-width: 3px;
            box-shadow: 0 0 0 0.25rem rgba(0, 0, 0, 0.15);
        }
    </style>
</head>

<body>
    <div class="container my-5">
        <div id="error-message" class="alert alert-danger" style="display: none;"></div>
        <div id="success-message" class="alert alert-success" style="display: none;"></div>
        <div class="d-flex justify-content-between align-items-center mb-4">
            <a href="/index" class="btn btn-outline-primary">
                <i class="fa fa-home"></i> <span>返回首页</span>
            </a>
            <h1 class="mb-0">专辑申请</h1>
            <div style="width: 100px;"></div>
        </div>

        <!-- 服务选择 -->
        <div class="form-section mb-4">
            <h3 class="mb-4">服务选择</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-check service-option">
                        <input class="form-check-input" type="radio" name="serviceType" id="audioOnly" value="audioOnly" checked>
                        <label class="form-check-label" for="audioOnly">
                            <h4>音源作业的仅委托</h4>
                            <p class="text-muted">仅委托音源的加工和编辑</p>
                        </label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-check service-option">
                        <input class="form-check-input" type="radio" name="serviceType" id="fullService" value="fullService">
                        <label class="form-check-label" for="fullService">
                            <h4>从制作到发行委托</h4>
                            <p class="text-muted">从音源的加工到发行全过程委托</p>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <form id="albumForm" class="needs-validation" novalidate>
            <!-- 基本信息 -->
            <div class="form-section">
                <h3 class="mb-4">基本信息</h3>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="releaseDate" class="form-label required-label">发行开始希望日期</label>
                        <input type="date" class="form-control" id="releaseDate" name="releaseDate" required>
                        <small class="text-muted">发行开始日期应为今日起3周后的日期</small>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="email" class="form-label required-label">电子邮件地址</label>
                        <input type="email" class="form-control" id="email" name="email" autocomplete="username" required>
                        <div class="invalid-feedback">
                            请输入有效的电子邮件地址（必须包含@）
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="password" class="form-label required-label">密码</label>
                        <input type="password" class="form-control" id="password" name="password" autocomplete="current-password" required>
                        <div class="invalid-feedback">
                            请输入密码
                        </div>
                        <small class="text-muted">预约确认时需要</small>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="albumNameDomestic" class="form-label required-label">专辑名（中文）</label>
                        <input type="text" class="form-control" id="albumNameDomestic" name="albumNameDomestic" placeholder="请输入专辑名" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="albumNameInternational" class="form-label required-label">专辑名（English）</label>
                        <input type="text" class="form-control" id="albumNameInternational" name="albumNameInternational" placeholder="Enter album name in English" required>
                    </div>
                </div>
            </div>

            <!-- 专辑信息 -->
            <div class="form-section">
                <h3 class="mb-4">专辑信息</h3>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="artistNameKana" class="form-label required-label">艺术家名 (カナ)</label>
                        <input type="text" id="artistNameKana" name="artistNameKana" class="form-control" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="artistNameEnglish" class="form-label required-label">艺术家名 (English)</label>
                        <input type="text" id="artistNameEnglish" name="artistNameEnglish" class="form-control" required>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="versionInfo" class="form-label required-label">版本信息</label>
                    <input type="text" id="versionInfo" name="versionInfo" class="form-control" required>
                </div>
            </div>

            <!-- 乐曲信息 -->
            <div class="form-section">
                <h3 class="mb-4">乐曲信息</h3>
                <button type="button" class="btn btn-success mb-3" id="addSongButton">
                    <i class="fa fa-plus"></i> 添加乐曲
                </button>
                <div id="songs-container">
                    <!-- Template for song entry -->
                    <div class="song-entry mb-4 p-3 border rounded" data-song-index="0">
                        <h4 class="d-flex justify-content-between align-items-center">
                            乐曲 #<span class="song-number">1</span>
                            <button type="button" class="btn btn-danger remove-song" style="display: none;">
                                <i class="fa fa-trash"></i>
                            </button>
                        </h4>

                        <!-- 乐曲基本信息 -->
                        <div class="song-basic-info mb-4">
                            <h5>乐曲基本信息</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label required-label">乐曲标题 (中文)</label>
                                    <input type="text" name="title_0" class="form-control" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label required-label">乐曲标题 (English)</label>
                                    <input type="text" name="titleEn_0" class="form-control" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label required-label">播放时间</label>
                                    <div class="input-group">
                                        <input type="number" name="duration_min_0" class="form-control" placeholder="分" min="0" required>
                                        <span class="input-group-text">分</span>
                                        <input type="number" name="duration_sec_0" class="form-control" placeholder="秒" min="0" max="59" required>
                                        <span class="input-group-text">秒</span>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label required-label">流派</label>
                                    <select class="form-select" name="genre_0" required>
                                        <option value="" disabled selected>请选择流派</option>
                                        <option value="rock">摇滚 (Rock)</option>
                                        <option value="pop">流行 (Pop)</option>
                                        <option value="jazz">爵士 (Jazz)</option>
                                        <option value="classical">古典 (Classical)</option>
                                        <option value="electronic">电子 (Electronic)</option>
                                        <option value="hiphop">嘻哈 (Hip-Hop)</option>
                                        <option value="country">乡村 (Country)</option>
                                        <option value="experimental">实验 (Experimental)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- 艺术家信息 -->
                        <div class="artist-section mb-4">
                            <h5>艺术家信息</h5>
                            <div id="mainArtistContainer_0" class="mb-3">
                                <label class="form-label required-label">主要艺术家</label>
                                <div class="input-group">
                                    <input type="text" name="mainArtist_0[]" class="form-control" required>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-success add-field">+</button>
                                        <button type="button" class="btn btn-danger remove-field">-</button>
                                    </div>
                                </div>
                            </div>

                            <div id="participatingArtistContainer_0" class="mb-3">
                                <label class="form-label required-label">参与艺术家</label>
                                <div class="input-group">
                                    <input type="text" name="participatingArtist_0[]" class="form-control" required>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-success add-field">+</button>
                                        <button type="button" class="btn btn-danger remove-field">-</button>
                                    </div>
                                </div>
                            </div>

                            <div id="featuringContainer_0" class="mb-3">
                                <label class="form-label">Featuring Artists</label>
                                <div class="input-group">
                                    <input type="text" name="featuring_0[]" class="form-control">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-success add-field">+</button>
                                        <button type="button" class="btn btn-danger remove-field">-</button>
                                    </div>
                                </div>
                            </div>

                            <div id="mixingEngineerContainer_0" class="mb-3">
                                <label class="form-label required-label">混音工程师</label>
                                <div class="input-group">
                                    <input type="text" name="mixingEngineer_0[]" class="form-control" required>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-success add-field">+</button>
                                        <button type="button" class="btn btn-danger remove-field">-</button>
                                    </div>
                                </div>
                            </div>

                            <div id="recordingEngineerContainer_0" class="mb-3">
                                <label class="form-label required-label">录音工程师</label>
                                <div class="input-group">
                                    <input type="text" name="recordingEngineer_0[]" class="form-control" required>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-success add-field">+</button>
                                        <button type="button" class="btn btn-danger remove-field">-</button>
                                    </div>
                                </div>
                            </div>

                            <div id="producerContainer_0" class="mb-3">
                                <label class="form-label required-label">制作人</label>
                                <div class="input-group">
                                    <input type="text" name="producer_0[]" class="form-control" required>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-success add-field">+</button>
                                        <button type="button" class="btn btn-danger remove-field">-</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 作者信息 -->
                        <div class="creator-section mb-4">
                            <h5>作者信息</h5>
                            <div id="lyricistContainer_0" class="mb-3">
                                <label class="form-label required-label">作词</label>
                                <div class="input-group">
                                    <input type="text" name="lyricist_0[]" class="form-control" required>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-success add-field">+</button>
                                        <button type="button" class="btn btn-danger remove-field">-</button>
                                    </div>
                                </div>
                            </div>

                            <div id="composerContainer_0" class="mb-3">
                                <label class="form-label required-label">作曲</label>
                                <div class="input-group">
                                    <input type="text" name="composer_0[]" class="form-control" required>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-success add-field">+</button>
                                        <button type="button" class="btn btn-danger remove-field">-</button>
                                    </div>
                                </div>
                            </div>

                            <div id="arrangerContainer_0" class="mb-3">
                                <label class="form-label required-label">编曲</label>
                                <div class="input-group">
                                    <input type="text" name="arranger_0[]" class="form-control" required>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-success add-field">+</button>
                                        <button type="button" class="btn btn-danger remove-field">-</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 其他信息 -->
                        <div class="other-info-section">
                            <h5>其他信息</h5>
                            <div class="mb-3">
                                <label class="form-label required-label">音频文件（WAV格式）</label>
                                <input type="file" class="form-control" name="audioFiles" accept=".wav" required>
                                <div class="alert alert-warning mt-2">
                                    <p class="text-danger">※ 音频文件必须遵守以下规格：</p>
                                    <ul>
                                        <li>文件格式: WAV</li>
                                        <li>采样率: 44.1kHz 或 48kHz</li>
                                        <li>比特深度: 16bit 或 24bit</li>
                                        <li>声道: 立体声</li>
                                        <li>文件大小: 500MB以下</li>
                                    </ul>
                                    <p>※ 如果音频文件不符合规格，可能会导致音质下降或处理延迟。</p>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label required-label">是否为翻唱曲？</label>
                                <div class="form-check">
                                    <input type="radio" class="form-check-input" name="isRemake_0" value="yes" required>
                                    <label class="form-check-label">是</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" class="form-check-input" name="isRemake_0" value="no" required>
                                    <label class="form-check-label">否</label>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">是否使用外部购买的节拍/样本？</label>
                                <div class="form-check">
                                    <input type="radio" class="form-check-input" name="usesExternalBeat_0" value="yes" required>
                                    <label class="form-check-label">是</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" class="form-check-input" name="usesExternalBeat_0" value="no" required>
                                    <label class="form-check-label">否</label>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label required-label">语言</label>
                                <div class="accordion" id="languageAccordion_0">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="languageHeading_0">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#languageCollapse_0" aria-expanded="false" aria-controls="languageCollapse_0">
                                                选择语言
                                            </button>
                                        </h2>
                                        <div id="languageCollapse_0" class="accordion-collapse collapse" aria-labelledby="languageHeading_0" data-bs-parent="#languageAccordion_0">
                                            <div class="accordion-body">
                                                <select class="form-select" name="language_0" required>
                                                    <option value="instrumental">演奏（无语言）</option>
                                                    <option value="japanese">日语</option>
                                                    <option value="english">英语</option>
                                                    <option value="korean">韩语</option>
                                                    <option value="chinese">中文</option>
                                                    <option value="spanish">西班牙语</option>
                                                    <option value="french">法语</option>
                                                    <option value="german">德语</option>
                                                    <option value="italian">意大利语</option>
                                                    <option value="portuguese">葡萄牙语</option>
                                                    <option value="russian">俄语</option>
                                                    <option value="arabic">阿拉伯语</option>
                                                    <option value="hindi">印地语</option>
                                                    <option value="bengali">孟加拉语</option>
                                                    <option value="punjabi">旁遮普语</option>
                                                    <option value="javanese">爪哇语</option>
                                                    <option value="vietnamese">越南语</option>
                                                    <option value="thai">泰语</option>
                                                    <option value="turkish">土耳其语</option>
                                                    <option value="persian">波斯语</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">歌词</label>
                                <textarea class="form-control" name="lyrics_0" rows="5" placeholder="请输入歌词"></textarea>
                                <div class="alert alert-warning mt-2">
                                    <p>- 歌词中包含性内容或暴力言论的，请勾选禁止事项。</p>
                                    <p>- 歌词中包含性内容或暴力言论但未勾选禁止事项的，当社将根据方针对歌词服务进行限制。</p>
                                    <p>- 商标出现在歌词中的，各平台方将根据方针对歌词服务进行限制。</p>
                                </div>
                                <div class="form-check mt-2">
                                    <input type="checkbox" class="form-check-input" name="hasExplicitContent_0">
                                    <label class="form-check-label">歌词中包含性内容或暴力言论</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 专辑整体信息 -->
            <div class="form-section">
                <h3>专辑整体信息</h3>
                <div class="mb-3">
                    <label for="albumCover" class="form-label required-label">专辑封面</label>
                    <input type="file" class="form-control" id="albumCover" name="albumCover" accept=".jpg,.jpeg,.png" required>
                    <div class="alert alert-warning mt-2">
                        <p class="text-danger">※ 不得使用商标或商用图像</p>
                        <p><strong>专辑封面必须遵守以下规格：</strong></p>
                        <ul>
                            <li>尺寸: 3,000 x 3,000 像素（正方形）</li>
                            <li>文件格式: JPG 或 PNG</li>
                            <li>文件大小: 10MB以下</li>
                        </ul>
                        <p>※ 超出规格的图像将自动调整大小，画质可能会下降。</p>
                    </div>
                </div>

                <!-- 同意事项 -->
                <div class="terms-section">
                    <h4>同意事项</h4>
                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" name="rightsAgreement" required>
                        <label class="form-check-label">同意所有关于版权等权利纠纷的信息。</label>
                        <div class="terms-content">
                            <p><strong>1.</strong> 本有偿服务适用于尚无发行记录的、有偿会员原创的新创作品。</p>
                            
                            <p><strong>2.</strong> 会员保证其对拟发行的内容（以下简称"分发内容"）拥有授予本公司独家分发权所必需的合法著作权、邻接权、商标权、外观设计权、肖像权等权利及/或在本有偿服务合同期间有效的相关使用授权，且保证分发内容不侵犯任何第三方的著作权、邻接权、商标权、外观设计权、肖像权及其他合法权益。</p>
                            
                            <p><strong>3.</strong> 会员保证，在公司根据有偿使用合同进行分发内容的独家分发业务过程中，会员未签署（无论是口头还是书面形式）任何会妨碍或阻碍公司开展该业务的协议，也无此类义务；同时，会员未将分发内容的邻接权等与分发业务相关的任何权利转让、授权、赠与、设定担保或以其他方式处分给第三方，且无此类处分义务。</p>
                            
                            <p><strong>4.</strong> 会员承诺，为保障公司在有偿使用合同期限内对分发内容开展独家分发业务，会员在合同期内不得：(i) 自行开展该内容的分发业务，(ii) 将该内容的分发权授予公司以外的第三方，(iii) 使用该内容的全部或部分进行重新录音、制作、发行新的音源，或签署相关制作及/或销售合同，(iv) 以及其他可能侵害公司独家分发权的法律或事实行为。</p>
                            
                            <p><strong>5.</strong> 若有第三方（包括通过DSP客户支持网站间接提出）对有偿会员发行的内容提出权利主张，公司可要求会员作出说明。公司可根据该说明代表会员主张其权利，最多不超过两次。若两次主张后仍无法证实会员的权利归属，或权利纠纷持续存在，公司有权终止或撤回权利主张。</p>
                            
                            <p><strong>6.</strong> 即使有偿会员进行了说明，但若第三方的主张仍构成合理怀疑，则公司可根据 Surroundio 使用条款向会员发出通知后，立即中止该音源及/或内容的有偿服务，并可暂停其收益结算金的支付，暂停期间不计利息。若第三方主张具有明确法律依据或存在需紧急中止服务的情形，公司可不经会员事前通知即中止该音源及/或内容的有偿服务，并暂停收益结算金支付。若相关纠纷因法律程序终结或当事人间达成协议等方式解决，公司将根据结果向会员支付已暂缓的结算金。</p>
                            
                            <p><strong>7.</strong> 若因分发内容违反上述保证与承诺而引发与第三方的纠纷，会员应自行承担全部责任及费用解决该纠纷，并确保公司免于承担任何责任。如因该纠纷造成公司产生费用，会员应予以全额赔偿。</p>
                        </div>
                    </div>

                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" name="reReleaseAgreement" required>
                        <label class="form-check-label">同意关于其他公司发行的音源再发行信息。</label>
                        <div class="terms-content">
                            <p><strong>1.</strong> 本有偿服务不允许重复发行曾在其他公司有过发行或分发记录的内容。</p>
                            
                            <p><strong>2.</strong> 但如有偿会员提出申请，并在专辑发行前至少7天，通过正式公文或电子邮件的形式（提交至邮箱：kmat0@surroundio.app），向公司提交原权利方出具的关于将该内容的分发权移转至本公司的书面同意文件，且该同意文件经公司确认无误的情况下，公司可批准收录已有发行/分发记录内容的专辑发行。若未在规定期限内提交上述书面同意文件，公司有权拒绝包含该曲目的专辑发行。</p>
                            
                            <p><strong>3.</strong> 若在未经原权利方书面同意的情况下，会员将内容上传至平台并推进专辑发行，之后原权利方或第三方对该内容提出权利主张，公司有权在未经有偿会员同意的情况下，立即中止该专辑整体或部分曲目的分发服务，并可暂停支付期间产生的邻接权使用费，或将其支付给原权利方。</p>
                            
                            <p><strong>4.</strong> 若因分发目标内容涉及与第三方或原权利方之间的分发权侵犯等问题而引发纠纷，会员应自行承担全部责任和费用解决相关纠纷，并确保公司免受一切法律责任或经济损失。如因此导致公司产生任何费用支出，会员应对此类损失承担全额赔偿责任。</p>
                        </div>
                    </div>

                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" name="platformAgreement" required>
                        <label class="form-check-label">同意关于发行国及平台的信息。</label>
                        <div class="terms-content">
                            <p><strong>1.</strong> 本有偿服务原则上将有偿会员所注册／发行的内容，向与本公司签订内容分发协议的所有DSP及各DSP所覆盖的所有地区进行分发／提供。</p>
                            
                            <p><strong>2.</strong> 但若有偿会员通过平台明确表示不希望其内容在特定DSP或国家进行分发／提供的，本公司将根据该会员的要求或条件，对相关内容进行相应的分发／提供安排。</p>
                        </div>
                    </div>
                </div>

                <!-- 平台选择 -->
                <div class="platform-section">
                    <h4>希望发行的平台</h4>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="spotify">
                                <label class="form-check-label">Spotify</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="apple_music">
                                <label class="form-check-label">Apple Music</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="youtube_music">
                                <label class="form-check-label">YouTube Music</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="amazon_music">
                                <label class="form-check-label">Amazon Music</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="tidal">
                                <label class="form-check-label">TIDAL</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="deezer">
                                <label class="form-check-label">Deezer</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="pandora">
                                <label class="form-check-label">Pandora</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="soundcloud">
                                <label class="form-check-label">SoundCloud</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="napster">
                                <label class="form-check-label">Napster</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="anghami">
                                <label class="form-check-label">Anghami</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="joox">
                                <label class="form-check-label">JOOX</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="kkbox">
                                <label class="form-check-label">KKBOX</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="line_music">
                                <label class="form-check-label">LINE MUSIC</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="qq_music">
                                <label class="form-check-label">QQ Music</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="platforms[]" value="netease">
                                <label class="form-check-label">NetEase Cloud Music</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 除外国选择 -->
                <div class="form-section">
                    <h3>不希望发行的国家</h3>
                    <div class="accordion" id="excludedCountriesAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="asiaHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#asiaCollapse" aria-expanded="false" aria-controls="asiaCollapse">
                                    亚洲
                                </button>
                            </h2>
                            <div id="asiaCollapse" class="accordion-collapse collapse" aria-labelledby="asiaHeading" data-bs-parent="#excludedCountriesAccordion">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="JP">
                                                <label class="form-check-label">日本</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="CN">
                                                <label class="form-check-label">中国</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="KR">
                                                <label class="form-check-label">韩国</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="TW">
                                                <label class="form-check-label">台湾</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="HK">
                                                <label class="form-check-label">香港</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="SG">
                                                <label class="form-check-label">新加坡</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="MY">
                                                <label class="form-check-label">马来西亚</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="ID">
                                                <label class="form-check-label">印度尼西亚</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="TH">
                                                <label class="form-check-label">泰国</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="VN">
                                                <label class="form-check-label">越南</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="PH">
                                                <label class="form-check-label">菲律宾</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="IN">
                                                <label class="form-check-label">印度</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="PK">
                                                <label class="form-check-label">巴基斯坦</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="BD">
                                                <label class="form-check-label">孟加拉国</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="LK">
                                                <label class="form-check-label">斯里兰卡</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="europeHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#europeCollapse" aria-expanded="false" aria-controls="europeCollapse">
                                    欧洲
                                </button>
                            </h2>
                            <div id="europeCollapse" class="accordion-collapse collapse" aria-labelledby="europeHeading" data-bs-parent="#excludedCountriesAccordion">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="GB">
                                                <label class="form-check-label">英国</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="FR">
                                                <label class="form-check-label">法国</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="DE">
                                                <label class="form-check-label">德国</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="IT">
                                                <label class="form-check-label">意大利</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="ES">
                                                <label class="form-check-label">西班牙</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="PT">
                                                <label class="form-check-label">葡萄牙</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="NL">
                                                <label class="form-check-label">荷兰</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="BE">
                                                <label class="form-check-label">比利时</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="CH">
                                                <label class="form-check-label">瑞士</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="AT">
                                                <label class="form-check-label">奥地利</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="SE">
                                                <label class="form-check-label">瑞典</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="NO">
                                                <label class="form-check-label">挪威</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="DK">
                                                <label class="form-check-label">丹麦</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="FI">
                                                <label class="form-check-label">芬兰</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="IE">
                                                <label class="form-check-label">爱尔兰</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="americasHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#americasCollapse" aria-expanded="false" aria-controls="americasCollapse">
                                    北美洲・南美洲
                                </button>
                            </h2>
                            <div id="americasCollapse" class="accordion-collapse collapse" aria-labelledby="americasHeading" data-bs-parent="#excludedCountriesAccordion">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="US">
                                                <label class="form-check-label">美国</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="CA">
                                                <label class="form-check-label">加拿大</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="MX">
                                                <label class="form-check-label">墨西哥</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="BR">
                                                <label class="form-check-label">巴西</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="AR">
                                                <label class="form-check-label">阿根廷</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="CL">
                                                <label class="form-check-label">智利</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="CO">
                                                <label class="form-check-label">哥伦比亚</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="PE">
                                                <label class="form-check-label">秘鲁</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="VE">
                                                <label class="form-check-label">委内瑞拉</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="EC">
                                                <label class="form-check-label">厄瓜多尔</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="BO">
                                                <label class="form-check-label">玻利维亚</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="PY">
                                                <label class="form-check-label">巴拉圭</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="UY">
                                                <label class="form-check-label">乌拉圭</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="othersHeading">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#othersCollapse" aria-expanded="false" aria-controls="othersCollapse">
                                    其他地区
                                </button>
                            </h2>
                            <div id="othersCollapse" class="accordion-collapse collapse" aria-labelledby="othersHeading" data-bs-parent="#excludedCountriesAccordion">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="AU">
                                                <label class="form-check-label">澳大利亚</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="NZ">
                                                <label class="form-check-label">新西兰</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="RU">
                                                <label class="form-check-label">俄罗斯</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="TR">
                                                <label class="form-check-label">土耳其</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="ZA">
                                                <label class="form-check-label">南非</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="EG">
                                                <label class="form-check-label">埃及</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="SA">
                                                <label class="form-check-label">沙特阿拉伯</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="AE">
                                                <label class="form-check-label">阿联酋</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="IL">
                                                <label class="form-check-label">以色列</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" name="excludedCountries[]" value="IR">
                                                <label class="form-check-label">伊朗</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- YouTube收益化服务 -->
            <div class="form-section">
                <h3 class="mb-4">YouTube收益化服务</h3>
                <div class="mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="youtubeMonetize" name="youtubeMonetize">
                        <label class="form-check-label" for="youtubeMonetize">使用</label>
                    </div>
                </div>

                <div class="youtube-terms">
                    <p>请确认关于YouTube收益化服务的同意事项。</p>
                    <ul>
                        <li>如果使用YouTube收益化服务，当社可以在YouTube上发布您的内容并显示广告。</li>
                        <li>广告收入可能会与当社共享。</li>
                        <li>需要同意YouTube的使用条款。</li>
                    </ul>
                </div>
            </div>

            <!-- 支付方式 -->
            <div class="form-section">
                <h3 class="mb-4">支付方式</h3>
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <div class="alert alert-info" role="alert" id="priceInfo">
                            <i class="fa fa-info-circle"></i> <span id="priceText">费用: 1,000人民币 (含税) <span class="text-danger fw-bold">仅限促销期间</span></span>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="payLater" name="payLater">
                            <label class="form-check-label fw-bold" for="payLater">
                                后付款（申请后会通知支付方式）
                            </label>
                        </div>
                        <div id="paypal-button-container" class="text-center"></div>
                        <div id="payment-status" class="payment-status"></div>
                    </div>
                </div>
            </div>

            <!-- 提交按钮 -->
            <div class="text-center mt-4">
                <button type="submit" id="submitButton" class="btn btn-primary btn-lg">
                    <span class="button-text">申请</span>
                    <span class="spinner-border spinner-border-sm ms-2" role="status" aria-hidden="true" style="display: none;"></span>
                </button>
            </div>
        </form>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="successModalLabel">
                        <i class="fa fa-check-circle text-success me-2"></i> 申请完成
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="fa fa-check-circle text-success" style="font-size: 4rem;"></i>
                    </div>
                    <p class="text-center">申请已成功完成。</p>
                    <p class="text-center">已将确认邮件发送至您注册的电子邮件地址，请查收。</p>
                    <div id="paymentInstructions" style="display: none;">
                        <hr>
                        <h6 class="text-center">关于支付</h6>
                        <p>如果您选择后付款，以下是支付方式：</p>
                        <ul>
                            <li>银行转账</li>
                            <li>信用卡</li>
                            <li>PayPal</li>
                        </ul>
                        <p>支付详情将在确认邮件中提供。</p>
                    </div>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-primary px-4" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="footer-flex-container">
            <p class="text-uppercase small templatemo-copyright">Surroundio copyright © 2022 Nationalux Canada, All rights reserved.</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script>
        $(document).ready(function() {
            // 调试工具函数
            const debug = {
                log: function(message, data) {
                    console.log(`[DEBUG] ${message}`, data);
                },
                error: function(message, error) {
                    console.error(`[ERROR] ${message}`, error);
                },
                formData: function(formData) {
                    console.log('[DEBUG] FormData Contents:');
                    for (let pair of formData.entries()) {
                        console.log(`${pair[0]}: ${pair[1]}`);
                    }
                }
            };

            // 表单数据验证函数
            const validateFormData = function(formData) {
                const requiredFields = ['artistNameKana', 'artistNameEnglish', 'versionInfo'];
                const missingFields = requiredFields.filter(field => !formData.get(field));
                
                if (missingFields.length > 0) {
                    debug.error('Missing required fields', missingFields);
                    return false;
                }
                
                return true;
            };

            let songCount = 0;
            let genreCount = 1;

            // Set minimum date to 3 weeks from today
            const releaseDateInput = document.getElementById('releaseDate');
            const today = new Date();
            const minDate = new Date(today);
            minDate.setDate(today.getDate() + 21); // 3 weeks = 21 days

            // 7月8日固定设置
            const fixedDate = '2024-07-08';
            releaseDateInput.min = minDate.toISOString().split('T')[0];
            releaseDateInput.value = fixedDate;

            // Enable submit button initially
            document.querySelector('button[type="submit"]').disabled = false;

            // 添加乐曲按钮 点击事件
            $('#addSongButton').on('click', function() {
                const originalSong = $('#songs-container .song-entry:first').clone();
                songCount++;

                // 设置新的乐曲编号
                originalSong.find('.song-number').text(songCount + 1);

                // 重置所有 input, select, textarea 和索引更新
                originalSong.find('input, select, textarea').each(function() {
                    const elem = $(this);
                    if (elem.attr('name')) {
                        elem.attr('name', elem.attr('name').replace(/_\d+/, `_${songCount}`));
                    }
                    if (elem.attr('id')) {
                        elem.attr('id', elem.attr('id').replace(/_\d+/, `_${songCount}`));
                    }
                    elem.val('');
                });

                // 更新容器ID
                originalSong.find('[id]').each(function() {
                    const elem = $(this);
                    elem.attr('id', elem.attr('id').replace(/_\d+/, `_${songCount}`));
                });

                // 更新Accordion ID和数据属性
                originalSong.find('.accordion').attr('id', `languageAccordion_${songCount}`);
                originalSong.find('.accordion-button')
                    .attr('data-bs-target', `#languageCollapse_${songCount}`)
                    .attr('aria-controls', `languageCollapse_${songCount}`);
                originalSong.find('.accordion-collapse')
                    .attr('id', `languageCollapse_${songCount}`)
                    .attr('aria-labelledby', `languageHeading_${songCount}`);

                // 显示删除按钮和事件设置
                originalSong.find('.remove-song').show().on('click', function() {
                    if ($('.song-entry').length > 1) {
                        $(this).closest('.song-entry').remove();
                        updateSongNumbers();
                    }
                });

                // 添加新的乐曲
                $('#songs-container').append(originalSong);

                // 删除除第一个乐曲外的所有删除按钮
                if ($('.song-entry').length > 1) {
                    $('.remove-song').show();
                }
            });

            // 添加输入字段/删除按钮 事件
            $(document).on('click', '.add-field', function(e) {
                e.preventDefault();
                const container = $(this).closest('.mb-3');
                const inputGroup = $(this).closest('.input-group');
                const newGroup = inputGroup.clone(true);
                newGroup.find('input').val('');
                container.append(newGroup);
                container.find('.remove-field').prop('disabled', false);
            });

            $(document).on('click', '.remove-field', function(e) {
                e.preventDefault();
                const container = $(this).closest('.mb-3');
                const inputGroups = container.find('.input-group');
                if (inputGroups.length > 1) {
                    $(this).closest('.input-group').remove();
                    if (inputGroups.length === 2) {
                        container.find('.remove-field').last().prop('disabled', true);
                    }
                }
            });

            // 更新乐曲编号函数
            function updateSongNumbers() {
                $('.song-entry').each(function(index) {
                    $(this).find('.song-number').text(index + 1);
                });
            }

            // 初始状态设置
            if ($('.song-entry').length === 1) {
                $('.remove-song').hide();
            }

            // 每个部分最初删除按钮禁用
            $('.mb-3').each(function() {
                if ($(this).find('.input-group').length === 1) {
                    $(this).find('.remove-field').prop('disabled', true);
                }
            });

            // 专辑封面图像验证
            $('#image').on('change', function() {
                const file = this.files[0];
                if (file) {
                    // 检查文件大小 (10MB)
                    if (file.size > 10 * 1024 * 1024) {
                        alert('文件大小应为10MB以下。');
                        this.value = '';
                        return;
                    }

                    // 检查图像尺寸
                    const img = new Image();
                    img.onload = function() {
                        if (this.width !== this.height) {
                            alert('图像应为正方形（纵横相同尺寸）。');
                            $('#image').val('');
                            return;
                        }
                        if (this.width < 3000 || this.height < 3000) {
                            alert('图像尺寸应为3000x3000像素以上。');
                            $('#image').val('');
                            return;
                        }
                    };
                    img.src = URL.createObjectURL(file);
                }
            });

            // 添加卸载处理程序
            window.addEventListener('unload', function() {
                // 清理任何挂起操作
                if (window.currentUpload) {
                    window.currentUpload.abort();
                }
            });

            // 表单提交处理程序
            $('#albumForm').on('submit', async function(e) {
                e.preventDefault();
                
                debug.log('=== Form Submission Start ===');
                
                // 执行必需字段验证
                const validationResult = validateRequiredFields();
                if (!validationResult.isValid) {
                    // 滚动到第一个错误字段
                    $('html, body').animate({
                        scrollTop: validationResult.firstErrorField.offset().top - 100
                    }, 500);
                    return;
                }
                
                // 更改按钮状态
                const submitButton = $('#submitButton');
                const buttonText = submitButton.find('.button-text');
                const spinner = submitButton.find('.spinner-border');
                
                // 检测移动设备
                const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                
                // PC版本保持原有代码
                submitButton.prop('disabled', true);
                buttonText.text('发送中...');
                spinner.show();
                
                // 仅在移动设备上添加额外优化
                if (isMobile) {
                    submitButton.css('pointer-events', 'none')
                        .css('opacity', '0.7');
                }
                
                try {
                    // 1. 收集表单数据并验证
                    const formData = new FormData(this);
                    
                    // 记录FormData内容
                    debug.log('FormData contents:');
                    for (let pair of formData.entries()) {
                        debug.log(`${pair[0]}: ${pair[1]}`);
                    }
                    
                    // 检查必需字段值并详细记录
                    const requiredFields = {
                        'artistNameKana': $('#artistNameKana').val()?.trim(),
                        'artistNameEnglish': $('#artistNameEnglish').val()?.trim(),
                        'versionInfo': $('#versionInfo').val()?.trim()
                    };
                    
                    debug.log('Required Fields Values:', requiredFields);
                    
                    // 2. 验证必需字段
                    const missingFields = Object.entries(requiredFields)
                        .filter(([_, value]) => !value)
                        .map(([key]) => key);
                        
                    if (missingFields.length > 0) {
                        debug.error('Missing Fields:', missingFields);
                        const errorMessage = $('#errorMessage');
                        errorMessage.html(`必填项未输入：${missingFields.join('、')}`).show();
                        $('#successMessage').hide();
                        
                        // 滚动到错误信息
                        $('html, body').animate({
                            scrollTop: errorMessage.offset().top - 100
                        }, 500);
                        
                        return;
                    }
                    
                    // 3. 在FormData中明确添加必需字段
                    Object.entries(requiredFields).forEach(([key, value]) => {
                        formData.set(key, value);
                    });
                    
                    // 4. 发送服务器请求
                    debug.log('Sending request to server...');
                    
                    // 仅在移动设备上应用超时设置
                    let controller;
                    let timeoutId;
                    
                    if (isMobile) {
                        controller = new AbortController();
                        timeoutId = setTimeout(() => controller.abort(), 180000); // 3分钟
                    }
                    
                    const response = await fetch('https://pro-audio.onrender.com/api/upload', {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'Accept': 'application/json',
                            'Origin': 'https://surroundio.life'
                        },
                        ...(isMobile && { signal: controller.signal })
                    });
                    
                    if (isMobile) {
                        clearTimeout(timeoutId);
                    }
                    
                    // 5. 处理响应
                    const responseText = await response.text();
                    debug.log('Server Response:', responseText);
                    
                    if (!response.ok) {
                        throw new Error(`Server error (${response.status}): ${responseText}`);
                    }
                    
                    // 6. 成功处理
                    $('#successMessage').show().text('发送已完成');
                    $('#errorMessage').hide();
                    
                    // 重置表单
                    this.reset();
                    
                    // 滚动到顶部
                    $('html, body').animate({
                        scrollTop: 0
                    }, 500);
                    
                    // 显示成功模态框
                    const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                    successModal.show();
                    
                    // 选择后付款时显示支付说明
                    if ($('#payLater').is(':checked')) {
                        $('#paymentInstructions').show();
                    } else {
                        $('#paymentInstructions').hide();
                    }
                    
                } catch (error) {
                    debug.error('Form submission error:', error);
                    const errorMessage = $('#errorMessage');
                    
                    // 改进错误信息
                    let errorText = '发生错误';
                    if (isMobile && error.name === 'AbortError') {
                        errorText += ': 超时。请再试一次。';
                    } else {
                        errorText += `: ${error.message}`;
                    }
                    
                    errorMessage.html(errorText).show();
                    $('#successMessage').hide();
                    
                    // 滚动到错误信息
                    $('html, body').animate({
                        scrollTop: errorMessage.offset().top - 100
                    }, 500);
                    
                } finally {
                    // 恢复按钮状态
                    submitButton.prop('disabled', false);
                    if (isMobile) {
                        submitButton.css('pointer-events', 'auto')
                            .css('opacity', '1');
                    }
                    buttonText.text('申请');
                    spinner.hide();
                    debug.log('=== Form Submission End ===');
                }
            });

            // 必需字段验证函数
            function validateRequiredFields() {
                // 移除现有错误样式
                $('.form-control, .form-select, .form-check-input').removeClass('is-invalid');
                $('.invalid-feedback').hide();
                
                let isValid = true;
                let firstErrorField = null;
                
                // 定义必需字段列表
                const requiredFields = [
                    { selector: '#email', name: '电子邮件地址' },
                    { selector: '#password', name: '密码' },
                    { selector: '#albumNameDomestic', name: '专辑名（中文）' },
                    { selector: '#albumNameInternational', name: '专辑名（English）' },
                    { selector: '#artistNameKana', name: '艺术家名（カナ）' },
                    { selector: '#artistNameEnglish', name: '艺术家名（English）' },
                    { selector: 'input[name="audioFiles"]', name: '音频文件' },
                    { selector: 'input[name="albumCover"]', name: '专辑封面' }
                ];
                
                // 仅当不是音源作业的仅委托时才检查versionInfo
                if (!$('#audioOnly').is(':checked')) {
                    requiredFields.push({ selector: '#versionInfo', name: '版本信息' });
                }
                
                // 检查每个必需字段
                requiredFields.forEach(field => {
                    const $field = $(field.selector);
                    const value = $field.val();
                    
                    if (!value || value.trim() === '' || (field.selector === 'input[name="audioFiles"]' && $field[0].files.length === 0) || (field.selector === 'input[name="albumCover"]' && $field[0].files.length === 0)) {
                        $field.addClass('is-invalid');
                        $field.css('border-color', '#dc3545');
                        
                        // 自定义错误信息显示
                        let errorMsg = $field.siblings('.invalid-feedback');
                        if (errorMsg.length === 0) {
                            errorMsg = $('<div class="invalid-feedback"></div>').insertAfter($field);
                        }
                        errorMsg.text(`${field.name}必须输入`).show();
                        
                        if (!firstErrorField) {
                            firstErrorField = $field;
                        }
                        isValid = false;
                    }
                });
                
                // 检查歌曲信息
                $('.song-entry').each(function(index) {
                    const songRequiredFields = [
                        { selector: `input[name="title_${index}"]`, name: '乐曲标题（中文）' },
                        { selector: `input[name="titleEn_${index}"]`, name: '乐曲标题（English）' },
                        { selector: `input[name="duration_min_${index}"]`, name: '播放时间（分钟）' },
                        { selector: `input[name="duration_sec_${index}"]`, name: '播放时间（秒）' },
                        { selector: `select[name="genre_${index}"]`, name: '流派' }
                    ];
                    
                    songRequiredFields.forEach(field => {
                        const $field = $(field.selector);
                        if ($field.length > 0) {
                            const value = $field.val();
                            
                            if (!value || value.trim() === '') {
                                $field.addClass('is-invalid');
                                $field.css('border-color', '#dc3545');
                                
                                let errorMsg = $field.siblings('.invalid-feedback');
                                if (errorMsg.length === 0) {
                                    errorMsg = $('<div class="invalid-feedback"></div>').insertAfter($field);
                                }
                                errorMsg.text(`${field.name}必须输入`).show();
                                
                                if (!firstErrorField) {
                                    firstErrorField = $field;
                                }
                                isValid = false;
                            }
                        }
                    });
                });
                
                // 同意事项复选框验证
                const agreementFields = [
                    { selector: 'input[name="rightsAgreement"]', name: '关于版权等权利纠纷的同意' },
                    { selector: 'input[name="reReleaseAgreement"]', name: '关于其他公司发行的音源再发行的同意' },
                    { selector: 'input[name="platformAgreement"]', name: '关于发行国及平台的信息的同意' }
                ];
                
                agreementFields.forEach(field => {
                    const $field = $(field.selector);
                    if (!$field.is(':checked')) {
                        $field.addClass('is-invalid');
                        $field.closest('.form-check').css('border', '2px solid #dc3545').css('padding', '5px').css('border-radius', '5px');
                        
                        if (!firstErrorField) {
                            firstErrorField = $field;
                        }
                        isValid = false;
                    } else {
                        $field.closest('.form-check').css('border', '').css('padding', '').css('border-radius', '');
                    }
                });
                
                return { isValid, firstErrorField };
            }

            // 输入时移除错误样式
            $(document).on('input change', '.form-control, .form-select, .form-check-input', function() {
                $(this).removeClass('is-invalid');
                $(this).css('border-color', '');
                $(this).siblings('.invalid-feedback').hide();
                $(this).closest('.form-check').css('border', '').css('padding', '').css('border-radius', '');
            });

            // PayPal按钮初始化
            let paypalButtonsInstance;

            function initializePayPal() {
                // 기존 PayPal 버튼이 있으면 제거
                if (paypalButtonsInstance) {
                    $('#paypal-button-container').empty();
                }

                // 서비스 타입에 따른 금액 결정
                const isFullService = $('#fullService').is(':checked');
                const amount = isFullService ? '1500' : '1000';

                // 가격 텍스트 업데이트
                const priceText = isFullService ? 
                    '费用: 1,500人民币 (含税) <span class="text-danger fw-bold">仅限促销期间</span>' : 
                    '费用: 1,000人民币 (含税) <span class="text-danger fw-bold">仅限促销期间</span>';
                $('#priceText').html('<i class="fa fa-info-circle"></i> ' + priceText);

                paypalButtonsInstance = paypal.Buttons({
                    createOrder: function(data, actions) {
                        return actions.order.create({
                            purchase_units: [{
                                amount: {
                                    value: amount,
                                    currency_code: 'CNY'
                                }
                            }],
                            application_context: {
                                shipping_preference: 'NO_SHIPPING'
                            }
                        });
                    },
                    onApprove: function(data, actions) {
                        return actions.order.capture().then(function(details) {
                            const successText = isFullService ? 
                                '支付已完成（1500人民币）。' : 
                                '支付已完成（1000人民币）。';
                            $('#payment-status').removeClass('error').addClass('success')
                                .html(successText)
                                .show();
                            $('#payment-status').data('paid', true);
                        });
                    },
                    onError: function(err) {
                        console.error('PayPal Error:', err);
                        $('#payment-status').removeClass('success').addClass('error')
                            .html('支付处理中发生错误。')
                            .show();
                        $('#payment-status').data('paid', false);
                    },
                    onCancel: function() {
                        $('#payment-status').removeClass('success').addClass('error')
                            .html('支付已取消。')
                            .show();
                        $('#payment-status').data('paid', false);
                    },
                    style: {
                        layout: 'vertical',
                        color: 'blue',
                        shape: 'rect',
                        label: 'pay',
                        fundingSource: paypal.FUNDING.PAYLATER
                    }
                }).render('#paypal-button-container').catch(function(error) {
                    console.error('PayPal Button Render Error:', error);
                    $('#paypal-button-container').html('<div class="alert alert-danger">无法加载PayPal按钮。请刷新页面后再试一次。</div>');
                });
            }

            // 초기 PayPal 버튼 생성
            initializePayPal();

            // 서비스 타입 변경 시 PayPal 버튼 재생성
            $('input[name="serviceType"]').on('change', function() {
                initializePayPal();
            });

            // 根据pay later复选框切换PayPal按钮可见性
            $('#payLater').on('change', function() {
                if ($(this).prop('checked')) {
                    $('#paypal-button-container').hide();
                } else {
                    $('#paypal-button-container').show();
                }
            });

            // 根据服务选择更改有效/无效字段
            function updateFieldStates() {
                const isAudioOnly = $('#audioOnly').is(':checked');
                
                if (isAudioOnly) {
                    // 如果是仅委托音源作业，则保持所有字段为默认颜色
                    // 保持所有字段激活 (不使其失效)
                    $('input, select, textarea').prop('disabled', false);
                    $('.form-section, .form-group, .mb-3').removeClass('disabled-field');
                    
                    // 首先将所有字段的背景色设置为深灰色
                    $('input, select, textarea').css('background-color', '#6c757d');
                    
                    // 仅保留需要保留的字段的颜色 (移除versionInfo)
                    $('#email, #password, #albumNameDomestic, #albumNameInternational, #artistNameKana, #artistNameEnglish, input[name="audioFiles"], input[name="albumCover"]').css('background-color', '');
                    
                    // versionInfo字段明确设置为深灰色
                    $('#versionInfo').css('background-color', '#6c757d');
                    
                    // 同意事项文本背景色设置为深灰色
                    $('.terms-content').css('background-color', '#6c757d');
                    
                    // 平台部分背景色设置为深灰色
                    $('.platform-section').css('background-color', '#6c757d');
                    
                    // 日期字段固定为7月8日
                    $('#releaseDate').val('2024-07-08');
                    
                    // 播放时间字段设置为0
                    $('input[name^="duration_min_"], input[name^="duration_sec_"]').each(function() {
                        const $field = $(this);
                        if (!$field.val() || $field.val().trim() === '') {
                            $field.val('0');
                        }
                    });
                    
                    // 流派字段自动选择为pop (服务器enum验证原因)
                    $('select[name^="genre_"]').val('pop');
                    
                    // 从"いいえ"自动选择翻唱曲和外部购买的节拍/样本
                    $('input[name^="isRemake_"][value="no"]').prop('checked', true);
                    $('input[name^="usesExternalBeat_"][value="no"]').prop('checked', true);
                    
                    // 同意事项复选框自动勾选
                    $('input[name="rightsAgreement"], input[name="reReleaseAgreement"], input[name="platformAgreement"]').prop('checked', true);
                    
                    // 语言字段自动选择日语
                    $('select[name^="language_"]').val('japanese');
                    
                    // 平台复选框自动勾选
                    $('input[name="platforms[]"]').prop('checked', true);
                    
                    // versionInfo字段自动输入"該当なし"
                    if (!$('#versionInfo').val() || $('#versionInfo').val().trim() === '') {
                        $('#versionInfo').val('該当なし');
                    }
                    
                    // 将需要保留的字段和播放时间字段、流派字段、WAV文件上传字段、以及除email、password、albumNameDomestic、albumNameInternational、artistNameKana、artistNameEnglish、audioFiles、albumCover之外的所有字段设置为"該当なし"
                    $('input, select, textarea').not('#email, #password, #albumNameDomestic, #albumNameInternational, #artistNameKana, #artistNameEnglish, input[name="audioFiles"], input[name="albumCover"]').not('[name^="duration_min_"], [name^="duration_sec_"], [name^="genre_"]').each(function() {
                        const $field = $(this);
                        const fieldType = $field.prop('tagName').toLowerCase();
                        
                        if (fieldType === 'input' && ($field.attr('type') === 'text' || $field.attr('type') === 'email' || !$field.attr('type'))) {
                            if (!$field.val() || $field.val().trim() === '') {
                                $field.val('該当なし');
                            }
                        } else if (fieldType === 'textarea') {
                            if (!$field.val() || $field.val().trim() === '') {
                                $field.val('該当なし');
                            }
                        } else if (fieldType === 'select') {
                            if (!$field.val()) {
                                // 如果select字段中没有"該당なし"选项，则添加
                                if ($field.find('option[value="該当なし"]').length === 0) {
                                    $field.prepend('<option value="該当なし">該当なし</option>');
                                }
                                $field.val('該当なし');
                            }
                        }
                    });
                    
                } else {
                    // 如果是从制作到发行委托，则恢复所有字段为默认颜色
                    $('input, select, textarea').prop('disabled', false);
                    $('.form-section, .form-group, .mb-3').removeClass('disabled-field');
                    $('input, select, textarea').css('background-color', '');
                    
                    // 同意事项文本背景色恢复为默认
                    $('.terms-content').css('background-color', '');
                    
                    // 平台部分背景色恢复为默认
                    $('.platform-section').css('background-color', '');
                    
                    // 日期字段固定为7月8日 (fullService中也相同)
                    $('#releaseDate').val('2024-07-08');
                    
                    // 从播放时间字段中移除0值
                    $('input[name^="duration_min_"], input[name^="duration_sec_"]').each(function() {
                        const $field = $(this);
                        if ($field.val() === '0') {
                            $field.val('');
                        }
                    });
                    
                    // 流派字段取消选择
                    $('select[name^="genre_"]').val('');
                    
                    // 复选框取消选择
                    $('input[name^="isRemake_"], input[name^="usesExternalBeat_"]').prop('checked', false);
                    
                    // 同意事项复选框取消勾选
                    $('input[name="rightsAgreement"], input[name="reReleaseAgreement"], input[name="platformAgreement"]').prop('checked', false);
                    
                    // 语言字段取消选择
                    $('select[name^="language_"]').val('');
                    
                    // 平台复选框取消勾选
                    $('input[name="platforms[]"]').prop('checked', false);
                    
                    // 从所有字段中移除"該当なし"
                    $('input, select, textarea').each(function() {
                        const $field = $(this);
                        const fieldType = $field.prop('tagName').toLowerCase();
                        
                        if (fieldType === 'input' && $field.attr('type') === 'text') {
                            if ($field.val() === '該当なし') {
                                $field.val('');
                            }
                        } else if (fieldType === 'textarea') {
                            if ($field.val() === '該当なし') {
                                $field.val('');
                            }
                        } else if (fieldType === 'select') {
                            if ($field.val() === '該当なし') {
                                $field.val('');
                            }
                            // "該当なし" 选项删除
                            $field.find('option[value="該当なし"]').remove();
                        }
                    });
                }
            }

            // 服务选择变更时的事件处理程序
            $('input[name="serviceType"]').on('change', function() {
                updateFieldStates();
            });

            // 初始状态设置
            updateFieldStates();

            // 페이지 나가기 전 경고 메시지
            let formChanged = false;
            let isSubmitting = false;

            // 폼 변경 감지
            $('input, select, textarea').on('input change', function() {
                formChanged = true;
            });

            // 폼 제출 시 경고 비활성화
            $('#albumForm').on('submit', function() {
                isSubmitting = true;
            });

            // 페이지 나가기 전 경고
            $(window).on('beforeunload', function(e) {
                if (formChanged && !isSubmitting) {
                    const message = '작성 중인 정보가 모두 리셋됩니다. 정말로 나가시겠습니까?';
                    e.returnValue = message;
                    return message;
                }
            });
        });

        // 移动版本提交按钮状态管理代码移除 (去除重复)
    </script>
</body>

</html>